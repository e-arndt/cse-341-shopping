{
  "swagger": "2.0",
  "info": {
    "title": "Shopping API",
    "description": "Docs for /auth, /users and /products",
    "version": "1.0.0"
  },
  "host": "localhost:8080",
  "basePath": "/",

  "tags": [
    { "name": "Auth", "description": "OAuth login and callback endpoints" },
    { "name": "System", "description": "API status and root endpoints" },
    { "name": "Users", "description": "User / customer account endpoints (protected)" },
    { "name": "Products", "description": "Product catalog endpoints" }
  ],

  "schemes": ["http"],

  "securityDefinitions": {
    "BearerAuth": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "Enter: Bearer <JWT token>"
    }
  },

  "consumes": ["application/json"],
  "produces": ["application/json"],

  "paths": {
    "/auth/google": {
      "get": {
        "tags": ["Auth"],
        "description": "Start Google OAuth authentication.",
        "responses": {
          "204": { "description": "No Content" }
        }
      }
    },

    "/auth/google/callback": {
      "get": {
        "tags": ["Auth"],
        "description": "Google OAuth callback endpoint.",
        "responses": {
          "200": { "description": "Successful login." },
          "204": { "description": "No Content" }
        }
      }
    },

    "/auth/failure": {
      "get": {
        "tags": ["Auth"],
        "description": "Handle failed OAuth login.",
        "responses": {
          "204": { "description": "No Content" },
          "401": { "description": "Unauthorized" }
        }
      }
    },

    "/": {
      "get": {
        "tags": ["System"],
        "description": "API root / health check endpoint.",
        "responses": {
          "200": { "description": "OK" },
          "204": { "description": "No Content" }
        }
      }
    },

    "/users/": {
      "get": {
        "tags": ["Users"],
        "description": "Get all users (protected).",
        "parameters": [
          { "name": "authorization", "in": "header", "type": "string" }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": { "description": "OK" },
          "204": { "description": "No Content" },
          "401": { "description": "Unauthorized" },
          "500": { "description": "Internal Server Error" }
        }
      },

      "post": {
        "tags": ["Users"],
        "description": "Create a new user (protected).",
        "parameters": [
          { "name": "authorization", "in": "header", "type": "string" },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": { "example": "any" },
                "firstName": { "example": "any" },
                "lastName": { "example": "any" }
              }
            }
          }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "201": { "description": "Created" },
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "401": { "description": "Unauthorized" },
          "409": { "description": "Conflict" },
          "500": { "description": "Internal Server Error" }
        }
      }
    },

    "/users/{id}": {
      "get": {
        "tags": ["Users"],
        "description": "Get a user by ID (protected).",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "string" },
          { "name": "authorization", "in": "header", "type": "string" }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": { "description": "OK" },
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Not Found" },
          "500": { "description": "Internal Server Error" }
        }
      },

      "put": {
        "tags": ["Users"],
        "description": "Update a user by ID (protected).",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "string" },
          { "name": "authorization", "in": "header", "type": "string" },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "email": { "example": "any" },
                "firstName": { "example": "any" },
                "lastName": { "example": "any" }
              }
            }
          }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": { "description": "OK" },
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Not Found" },
          "409": { "description": "Conflict" },
          "500": { "description": "Internal Server Error" }
        }
      },

      "delete": {
        "tags": ["Users"],
        "description": "Delete a user by ID (protected).",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "string" },
          { "name": "authorization", "in": "header", "type": "string" }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Not Found" },
          "500": { "description": "Internal Server Error" }
        }
      }
    },

    "/products/": {
      "get": {
        "tags": ["Products"],
        "description": "Get all products.",
        "responses": {
          "200": { "description": "OK" },
          "204": { "description": "No Content" },
          "500": { "description": "Internal Server Error" }
        }
      },

      "post": {
        "tags": ["Products"],
        "description": "Create a new product (protected).",
        "parameters": [
          { "name": "authorization", "in": "header", "type": "string" },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "name": { "example": "any" },
                "sku": { "example": "any" },
                "description": { "example": "any" },
                "category": { "example": "any" },
                "brand": { "example": "any" },
                "price": { "example": "any" },
                "quantityInStock": { "example": "any" },
                "countryOfOrigin": { "example": "any" },
                "color": { "example": "any" },
                "weight": { "example": "any" },
                "size": { "example": "any" }
              }
            }
          }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "201": { "description": "Created" },
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "401": { "description": "Unauthorized" },
          "409": { "description": "Conflict" },
          "500": { "description": "Internal Server Error" }
        }
      }
    },

    "/products/{id}": {
      "get": {
        "tags": ["Products"],
        "description": "Get a product by ID.",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "string" }
        ],
        "responses": {
          "200": { "description": "OK" },
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "404": { "description": "Not Found" },
          "500": { "description": "Internal Server Error" }
        }
      },

      "put": {
        "tags": ["Products"],
        "description": "Update a product by ID (protected).",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "string" },
          { "name": "authorization", "in": "header", "type": "string" },
          {
            "name": "body",
            "in": "body",
            "schema": {
              "type": "object",
              "properties": {
                "name": { "example": "any" },
                "sku": { "example": "any" },
                "description": { "example": "any" },
                "category": { "example": "any" },
                "brand": { "example": "any" },
                "price": { "example": "any" },
                "quantityInStock": { "example": "any" },
                "countryOfOrigin": { "example": "any" },
                "color": { "example": "any" },
                "weight": { "example": "any" },
                "size": { "example": "any" }
              }
            }
          }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": { "description": "OK" },
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Not Found" },
          "409": { "description": "Conflict" },
          "500": { "description": "Internal Server Error" }
        }
      },

      "delete": {
        "tags": ["Products"],
        "description": "Delete a product by ID (protected).",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "string" },
          { "name": "authorization", "in": "header", "type": "string" }
        ],
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "204": { "description": "No Content" },
          "400": { "description": "Bad Request" },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Not Found" },
          "500": { "description": "Internal Server Error" }
        }
      }
    }
  },

  "definitions": {
    "User": {
      "type": "object",
      "properties": {
        "_id": { "type": "string", "example": "671f2a9f3c0f9b3aa9d9b111" },
        "email": { "type": "string", "example": "alice@example.com" },
        "firstName": { "type": "string", "example": "Alice" },
        "lastName": { "type": "string", "example": "Anderson" },
        "createdAt": { "type": "string", "example": "2025-11-13T01:23:45.678Z" },
        "updatedAt": { "type": "string", "example": "2025-11-13T01:23:45.678Z" }
      }
    },

    "UsersArray": {
      "type": "array",
      "items": { "$ref": "#/definitions/User" }
    },

    "CreateUserRequest": {
      "type": "object",
      "properties": {
        "email": { "type": "string", "example": "alice@example.com" },
        "firstName": { "type": "string", "example": "Alice" },
        "lastName": { "type": "string", "example": "Anderson" }
      }
    },

    "Product": {
      "type": "object",
      "properties": {
        "_id": { "type": "string", "example": "671f2a9f3c0f9b3aa9d9b222" },
        "name": { "type": "string", "example": "Sample Widget" },
        "sku": { "type": "string", "example": "WID-1001" },
        "description": { "type": "string", "example": "A very fine sample widget." },
        "category": { "type": "string", "example": "Widgets" },
        "brand": { "type": "string", "example": "WidgetCo" },
        "price": { "type": "number", "example": 19.99 },
        "quantityInStock": { "type": "number", "example": 25 },
        "countryOfOrigin": { "type": "string", "example": "USA" },
        "color": { "type": "string", "example": "Blue" },
        "weight": { "type": "number", "example": 1.2 },
        "size": { "type": "string", "example": "Medium" }
      }
    },

    "ProductsArray": {
      "type": "array",
      "items": { "$ref": "#/definitions/Product" }
    },

    "CreateProductRequest": {
      "type": "object",
      "properties": {
        "name": { "type": "string", "example": "Sample Widget" },
        "sku": { "type": "string", "example": "WID-1001" },
        "description": { "type": "string", "example": "A very fine sample widget." },
        "category": { "type": "string", "example": "Widgets" },
        "brand": { "type": "string", "example": "WidgetCo" },
        "price": { "type": "number", "example": 19.99 },
        "quantityInStock": { "type": "number", "example": 25 },
        "countryOfOrigin": { "type": "string", "example": "USA" },
        "color": { "type": "string", "example": "Blue" },
        "weight": { "type": "number", "example": 1.2 },
        "size": { "type": "string", "example": "Medium" }
      }
    },

    "ErrorResponse": {
      "type": "object",
      "properties": {
        "message": { "type": "string", "example": "Something went wrong" }
      }
    }
  }
}
